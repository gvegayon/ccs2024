---
title: "epiworld(C++ | R | Py): A fast multi-language library for epidemiological agent-based models"
format: gfm
---

## From the abstract

I n this presentation, we will describe the main software design components that make epiworld so flexible and fast, discuss the challenges and decisions behind some of its key components, and provide an extended example illustrating its use. We will show how epiworld can be used to build a complex outbreak model with a large networked population featuring an evolving virus that generates multiple variants, heterogeneous susceptibility and recovery rates across the population, and a dynamic non-pharmaceutical intervention that triggers according to the n

```{bash}
./main.o
```


```{r}
library(data.table)
incidence <- fread("res/transitions.tsv")
incidence <- incidence[from == "Susceptible" & to == "Exposed"]
library(ggplot2)
ggplot(incidence, aes(x = date, y = counts)) +
  geom_line() +
  labs(
    title = "Daily incidence",
    x = "Date",
    y = "Count"
    ) +
  scale_y_log10()
```



```{r}
#| label: variants
virus_hist <- fread("res/transmissions.tsv")

# Total transmissions
daily_virus <- virus_hist[, .(count = .N), by = .(virus, date)]
daily_virus[, t_rate := as.double(gsub(".+-0\\.", "0.", virus))]
daily_virus[is.na(t_rate), t_rate := fifelse(
  virus == "Covid-19", .3, .2
)]

daily_virus[, vlabel := fifelse(grepl("-0\\.", virus), "Flu-variant", virus)]

ggplot(daily_virus, aes(
  x = date, y = count, color = t_rate, group=t_rate)) +
  scale_color_distiller(palette="YlOrRd", direction = 1) +
  geom_line() +
  geom_point(aes(shape = vlabel)) +
  scale_y_log10() +
  theme_dark() +
  labs(
    color = "Transmission\nRate",
    shape = "Variant",
    x = "Step (time)",
    y = "Daily incidence (log10)"
  )
```
